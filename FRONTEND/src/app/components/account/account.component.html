<app-header/>

<app-success-message [message]="successMessage"/>

<app-error-message [message]="errorMessage"/>

<div class="card">
  <div class="card-header mt-4">
    <h5 class="card-title">Vos informations</h5>
  </div>
  <div class="card-body">
    @if (isLoading) {
      <div class="spinner-border text-primary" role="status">
        <span class="sr-only">Loading...</span>
      </div>
    } @else {
      <form *ngIf="userForm" [formGroup]="userForm" (ngSubmit)="onSubmit()">
        <div class="form-group">
          <label for="firstname"><strong>Prénom </strong><app-required/></label>
          <input id="firstname" formControlName="firstnameControl" class="form-control"/>
          <small>{{ userForm | getErrors: 'firstnameControl': alreadySubmitted }}</small>
        </div>

        <div class="form-group">
          <label for="lastname"><strong>Nom de famille </strong><app-required/></label>
          <input id="lastname" formControlName="lastnameControl" class="form-control"/>
          <small>{{ userForm | getErrors: 'lastnameControl': alreadySubmitted }}</small>
        </div>

        <div class="form-group">
          <label for="email"><strong>Adresse mail </strong><app-required/></label>
          <input id="email" formControlName="emailControl" class="form-control"/>
          <small>{{ userForm | getErrors: 'emailControl': alreadySubmitted }}</small>
        </div>

        <div class="form-group">
          <label for="login"><strong>Login </strong><app-required/></label>
          <input id="login" formControlName="loginControl" class="form-control"/>
          <small>{{ userForm | getErrors: 'loginControl': alreadySubmitted }}</small>
        </div>

        <div class="form-group">
          <label for="password"><strong>Mot de passe </strong><app-required/></label>
          <input id="password" formControlName="passwordControl" class="form-control" type="password"/>
          <small>{{ userForm | getErrors: 'passwordControl': alreadySubmitted }}</small>
        </div>

        <div class="form-group">
          <label for="confirmPassword"><strong>Confirmer le mot de passe </strong><app-required/></label>
          <input id="confirmPassword" formControlName="confirmPasswordControl" class="form-control" type="password"/>
          <small>{{ userForm | getErrors: 'confirmPasswordControl': alreadySubmitted }}</small>
        </div>
        <button type="submit" class="btn btn-primary mt-3">Sauvegarder</button>
        <button class="btn btn-danger mt-3" (click)="onDisconnect()">Se déconnecter</button>
      </form>
    }
    <div class="card-header mt-4">
      <h5 class="card-title">Vos cartes</h5>
    </div>

    <app-list-cards/>

  </div>
</div>
